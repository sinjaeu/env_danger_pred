# 🌤️ 기상 기반 사망률 예측 시스템

실제 기상청 데이터를 기반으로 기온과 습도를 예측하고, 논문 데이터를 활용하여 사망률을 계산하는 Streamlit 애플리케이션입니다.

## 🚀 주요 기능

- **실제 기상청 API 연동**: 기상청 공공데이터 포털의 실제 기상 데이터 사용
- **기상 예측**: 과거 30일 데이터 기반 기온/습도 예측
- **사망률 계산**: 논문 기반 고급 위험도 모델을 통한 사망률 예측
- **계절별 분석**: 봄, 여름, 가을, 겨울별 차별화된 분석
- **지역별 분석**: 8개 주요 도시별 맞춤형 분석
- **실시간 시각화**: Plotly를 활용한 인터랙티브 차트

## 📋 설치 및 실행

### 1. 필요한 라이브러리 설치

```bash
pip install -r requirements.txt
```

### 2. 기상청 API 키 설정

1. [기상청 API Hub](https://apihub.kma.go.kr/) 접속
2. 회원가입/로그인
3. "기상관측" API 신청
4. API 키 발급
5. `config.env` 파일을 열어서 `WEATHER_API_KEY=your_api_key_here` 부분을 수정
6. `your_api_key_here`를 실제 발급받은 API 키로 변경

### API 요청 예시

```python
import requests

url = 'https://apihub.kma.go.kr/api/json'
params = {
    'authKey': 'YOUR_AUTH_KEY',
    'stn': '108',  # 서울 지점번호
    'tm': '20240101',  # 관측시각 (KST)
    'help': '0'  # 도움말 없음
}

response = requests.get(url, params=params)
data = response.json()
```

### API 응답 필드

- **TM**: 관측시각 (KST)
- **STN**: 국내 지점번호
- **TA**: 기온 (°C)
- **HM**: 상대습도 (%)
- **WD**: 풍향 (16방위)
- **WS**: 풍속 (m/s)
- **PA**: 현지기압 (hPa)
- **PS**: 해면기압 (hPa)
- **RN**: 강수량 (mm)

### 3. 애플리케이션 실행

```bash
streamlit run weather_mortality_prediction.py
```

## 🔧 사용법

### 1. API 키 설정
- `config.env` 파일에서 API 키를 설정하세요
- API 키가 없으면 애플리케이션이 시작되지 않습니다

### 2. 예측 파라미터 설정
- **위치 선택**: 서울, 부산, 대구, 인천, 광주, 대전, 울산, 제주
- **예측 날짜**: 미래 날짜 선택 (최대 90일 후)
- **연령대**: 전체, 20세 미만, 20-74세, 75세 이상
- **성별**: 전체, 남성, 여성

### 3. 예측 실행
- "기상 및 사망률 예측 실행" 버튼 클릭
- 실제 기상 데이터 기반 예측 결과 확인

### 4. 달력 기능
- 특정 날짜 선택하여 과거/미래 데이터 확인
- 과거 날짜: 실제 데이터 표시
- 미래 날짜: 예측 데이터 표시

## 📊 분석 결과

### 기상 예측
- 기온 (°C)
- 습도 (%)
- 계절별 트렌드 반영

### 위험도 분석
- 온도 위험도
- 습도 위험도
- 계절 위험도
- 지역 위험도
- 연령 위험도
- 성별 위험도
- 시간적 위험도

### 사망률 예측
- 10만명당 사망률
- 95% 신뢰구간
- 위험 수준 분류 (낮음/보통/높음/매우 높음)

## 🏗️ 시스템 구조

```
weather_mortality_prediction.py
├── WeatherAPI 클래스          # 기상청 API 연동
├── 데이터 로드 함수           # 실제/대체 데이터 처리
├── 예측 함수                 # 기상 예측 알고리즘
├── 위험도 계산 함수          # 논문 기반 위험도 모델
├── 사망률 계산 함수          # 사망률 예측 모델
└── 시각화 함수              # Plotly 차트 생성
```

## 📈 데이터 소스

### 기상 데이터
- **실제 데이터**: 기상청 API Hub
- **대체 데이터**: 계절별 특성을 반영한 시뮬레이션 데이터

### 위험도 모델
- **논문 기반**: 기후변화와 사망률 관련 연구 논문
- **지역 클러스터**: 도시별 기후 특성 분류
- **연령/성별**: 인구통계학적 요인 반영

## 🔍 주요 특징

### 실제 데이터 활용
- 기상청 API Hub를 통한 실시간 기상 데이터 수집
- API 실패 시 대체 데이터로 자동 전환
- 1시간마다 캐시 갱신으로 성능 최적화

### 고급 예측 모델
- 계절별 특성 반영
- 지역별 기후 차이 고려
- 연령대/성별별 위험도 차별화
- 기후변화 트렌드 반영

### 사용자 친화적 인터페이스
- 직관적인 사이드바 컨트롤
- 실시간 시각화
- 상세한 분석 결과 제공
- 반응형 디자인

## ⚠️ 주의사항

1. **API 키 보안**: API 키는 안전하게 보관하세요
2. **데이터 정확성**: 예측 결과는 참고용이며, 실제 의학적 판단의 근거로 사용하지 마세요
3. **API 제한**: 기상청 API Hub의 일일 호출 제한을 확인하세요
4. **네트워크 연결**: 실제 데이터 사용 시 인터넷 연결이 필요합니다

## 🛠️ 기술 스택

- **Frontend**: Streamlit
- **Data Processing**: Pandas, NumPy
- **Visualization**: Plotly
- **API Integration**: Requests
- **Data Source**: 기상청 API Hub

## 📝 라이선스

이 프로젝트는 교육 및 연구 목적으로 제작되었습니다.

## 🤝 기여

버그 리포트나 기능 제안은 언제든 환영합니다! 